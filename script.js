const translations = {
    en: {
        navHome: "Home",
        navRegister: "Register",
        navContact: "Contact",
        navAbout: "About Us",
        heroTitle: "Discover Georgia — Mountains, Wine & Culture",
        heroText: "Explore curated tours across the country: city walks in Tbilisi, mountain treks in Svaneti, wine tastings in Kakheti and visit Kutaisi Simon and many other places.",
        heroBtn: "View tours",
        toursHeading: "Popular tours",
        tourBtn: "Book now",
        tour1Title: "Sightseeing in Tbilisi",
        tour1Text: "A day of city highlights, local food, and scenic viewpoints.",
        tour2Title: "Hiking in Svaneti",
        tour2Text: "Multi-day treks among the high Caucasus mountains.",
        tour3Title: "Wine tour to Kakheti",
        tour3Text: "Vineyards, cellars and traditional Georgian supra.",
        tour4Title: "Kutaisi - Bikentias Kebab",
        tour4Text: "Explore Kutaisi city highlights and taste the famous Bikentias Kebab.",
        tour5Title: "Tour to Tusheti",
        tour5Text: "Explore the ancient towers and unique history of the remote Tusheti region.",
        tour6Title: "History of Zugdidi",
        tour6Text: "Delve into the rich history of Zugdidi and the Dadiani Palaces.",
        tour7Title: "Sea side of Batumi",
        tour7Text: "Experience the beautiful sea side of Batumi and its vibrant city life.",
        tour8Title: "Beauty of Kazbegi",
        tour8Text: "Witness the breathtaking beauty of Kazbegi and the iconic Gergeti Trinity Church.",
        destHeading: "Destinations",
        destTbilisi: "Tbilisi",
        destSvaneti: "Svaneti",
        destKakheti: "Kakheti",
        destKutaisi: "Kutaisi",
        destTusheti: "Tusheti",
        destZugdidi: "Zugdidi",
        destBatumi: "Batumi",
        destKazbegi: "Kazbegi",
        footerText: "Imereti Tourism",
        // Register Page
        registerTitle: "Book Your Tour",
        registerText: "Fill out the form below to book your spot on one of our amazing tours.",
        regName: "Name",
        regSurname: "Surname",
        regPhone: "Phone Number",
        regEmail: "Email",
        regTour: "Tour Destination",
        regPeople: "How many people?",
        regNotes: "Notes / Requests",
        regPriceLabel: "You have to pay:",
        registerSubmit: "Submit Booking",
        orderSuccess: "Thank you, your order has been received.",
        // Contact Page
        contactTitle: "Contact Us",
        contactText: "Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible.",
        contactSubmit: "Send Message",
        contactName: "Name",
        contactSurname: "Surname",
        messageSuccess: "Thank you, your message has been received.",
        // About Us Page
        aboutUsHeading: "About Imereti Tourism",
        aboutUsText1: "Imereti Tourism was founded by a group of passionate travelers who fell in love with the rich culture, stunning landscapes, and warm hospitality of Georgia. Our mission is to share this love with the world by offering authentic and unforgettable travel experiences.",
        aboutUsText2: "We believe in responsible tourism that benefits local communities. We partner with local guides, and family-owned guesthouses to ensure your journey has a positive impact. From the vibrant streets of Tbilisi to the remote mountain villages of Svaneti, we are here to help you discover the true soul of Georgia.",
        aboutCEOs: "CEO of Company: z.shengelia",
        videoAdTitle: "Experience Georgia Like Never Before",
    },
    ge: {
        navHome: "მთავარი",
        navRegister: "რეგისტრაცია",
        navContact: "კონტაქტი",
        navAbout: "ჩვენ შესახებ",
        heroTitle: "აღმოაჩინე საქართველო — მთები, ღვინო და კულტურა",
        heroText: "გამოიკვლიეთ ტურები მთელი ქვეყნის მასშტაბით: თბილისში გასეირნება, ლაშქრობა სვანეთში, ღვინის დეგუსტაცია კახეთში, ეწვიეთ ქუთაისს და ბევრ სხვა ადგილს.",
        heroBtn: "ტურების ნახვა",
        toursHeading: "პოპულარული ტურები",
        tourBtn: "დაჯავშნა",
        tour1Title: "თბილისში გასეირნება",
        tour1Text: "ქალაქის ღირსშესანიშნაობები, ადგილობრივი საკვები და პანორამული ხედები.",
        tour2Title: "ლაშქრობა სვანეთში",
        tour2Text: "მრავალდღიანი ლაშქრობები მაღალ კავკასიონის მთებში.",
        tour3Title: "ღვინის ტური კახეთში",
        tour3Text: "ვენახები, მარნები და ტრადიციული ქართული სუფრა.",
        tour4Title: "ქუთაისი - ბიკენტიას ქაბაბი",
        tour4Text: "გამოიკვლიეთ ქუთაისის ღირსშესანიშნაობები და დააგემოვნეთ ცნობილი ბიკენტიას ქაბაბი.",
        tour5Title: "ტური თუშეთში",
        tour5Text: "გამოიკვლიეთ უძველესი კოშკები და შორეული თუშეთის უნიკალური ისტორია.",
        tour6Title: "ზუგდიდის ისტორია",
        tour6Text: "ჩაუღრმავდით ზუგდიდისა და დადიანების სასახლეების მდიდარ ისტორიას.",
        tour7Title: "ბათუმის ზღვის სანაპირო",
        tour7Text: "განიცადეთ ბათუმის ულამაზესი ზღვის სანაპირო და მისი ძლიერი ქალაქური ცხოვრება.",
        tour8Title: "ყაზბეგის სილამაზე",
        tour8Text: "იხილეთ ყაზბეგის თვალწარმტაცი სილამაზე და გერგეთის სამების ეკლესია.",
        destHeading: "მიმართულებები",
        destTbilisi: "თბილისი",
        destSvaneti: "სვანეთი",
        destKakheti: "კახეთი",
        destKutaisi: "ქუთაისი",
        destTusheti: "თუშეთი",
        destZugdidi: "ზუგდიდი",
        destBatumi: "ბათუმი",
        destKazbegi: "ყაზბეგი",
        footerText: "Imereti ტურიზმი",
        // Register Page
        registerTitle: "დაჯავშნე ტური",
        registerText: "შეავსეთ ქვემოთ მოცემული ფორმა ჩვენს ერთ-ერთ საოცარ ტურზე ადგილის დასაჯავშნად.",
        regName: "სახელი",
        regSurname: "გვარი",
        regPhone: "ტელეფონის ნომერი",
        regEmail: "ელ.ფოსტა",
        regTour: "ტურის მიმართულება",
        regPeople: "რამდენი ადამიანი?",
        regNotes: "შენიშვნები / მოთხოვნები",
        regPriceLabel: "გადასახდელი თანხა:",
        registerSubmit: "დაჯავშნის გაგზავნა",
        orderSuccess: "გმადლობთ, თქვენი შეკვეთა მიღებულია.",
        // Contact Page
        contactTitle: "დაგვიკავშირდით",
        contactText: "გაქვთ შეკითხვები? სიამოვნებით მოგისმენთ. გამოგვიგზავნეთ შეტყობინება და ჩვენ გიპასუხებთ რაც შეიძლება მალე.",
        contactSubmit: "შეტყობინების გაგზავნა",
        contactName: "სახელი",
        contactSurname: "გვარი",
        messageSuccess: "გმადლობთ, თქვენი წერილი მიღებულია.",
        // About Us Page
        aboutUsHeading: "Imereti ტურიზმის შესახებ",
        aboutUsText1: "Imereti Tourism დაარსდა მოგზაურთა ჯგუფის მიერ, რომლებსაც შეუყვარდათ საქართველოს მდიდარი კულტურა, განსაცვიფრებელი პეიზაჟები და თბილი სტუმართმოყვარეობა. ჩვენი მისიაა, გავუზიაროთ ეს სიყვარული მსოფლიოს და შევთავაზოთ ავთენტური და დაუვიწყარი სამოგზაურო გამოცდილება.",
        aboutUsText2: "ჩვენ გვჯერა პასუხისმგებლიანი ტურიზმის, რომელიც სარგებელს მოუტანს ადგილობრივ თემებს. ჩვენ ვთანამშრომლობთ ადგილობრივ გიდებთან, საოჯახო სასტუმროებთან, რათა თქვენს მოგზაურობას დადებითი გავლენა ჰქონდეს. თბილისის ცოცხალი ქუჩებიდან სვანეთის შორეულ მთის სოფლებამდე, ჩვენ აქ ვართ, რათა დაგეხმაროთ საქართველოს ნამდვილი სულის აღმოჩენაში.",
        aboutCEOs: "კომპანიის დირექტორი: z.shengelia",
        videoAdTitle: "განიცადე საქართველო, როგორც არასდროს",
        // Destination Pages
        tbilisiWelcome: "კეთილი იყოს თქვენი მობრძანება თბილისში!",
        tbilisiDesc1: "თბილისი, საქართველოს დედაქალაქი, არის ცოცხალი და ისტორიული ქალაქი. ცნობილია თავისი მრავალფეროვანი არქიტექტურითა და ძველი ქალაქის ლაბირინთისებრი, რიყის ქვის ქუჩებით. გამოიკვლიეთ ნარიყალას ციხე, სამების საკათედრო ტაძარი და დატკბით ცნობილი გოგირდის აბანოებით.",
        tbilisiDesc2: "ჩვენი ტური 'თბილისში გასეირნება' გთავაზობთ ქალაქის მთავარი ადგილების, ადგილობრივი საკვებისა და პანორამული ხედების სრულ დღეს. არ გამოტოვოთ!",
        bookTbilisiTour: "დაჯავშნე თბილისის ტური",
        svanetiWelcome: "კეთილი იყოს თქვენი მობრძანება სვანეთში!",
        svanetiDesc1: "სვანეთი შუა საუკუნეების კოშკების, მყინვარებისა და კავკასიონის უმაღლესი მწვერვალების მხარეა. ეს შორეული რეგიონი გთავაზობთ საქართველოს ყველაზე სანახაობრივ ლაშქრობებსა და პეიზაჟებს.",
        svanetiDesc2: "ჩვენი ტური 'ლაშქრობა სვანეთში' არის მრავალდღიანი ლაშქრობა, რომელიც ჩაგძირავთ მთების ხელუხლებელ სილამაზეში.",
        bookSvanetiTour: "დაჯავშნე სვანეთის ტური",
        kakhetiWelcome: "კეთილი იყოს თქვენი მობრძანება კახეთში!",
        kakhetiDesc1: "კახეთი საქართველოს მთავარი მეღვინეობის რეგიონია. აღმოაჩინეთ ქვევრის ღვინის დაყენების უძველესი ტრადიცია, მოინახულეთ ულამაზესი მონასტრები და დაათვალიერეთ მომხიბლავი ქალაქი სიღნაღი.",
        kakhetiDesc2: "შემოგვიერთდით ჩვენს 'ღვინის ტურზე კახეთში' ვენახების, მარნებისა და ტრადიციული ქართული სუფრის დაუვიწყარი გამოცდილებისთვის.",
        bookKakhetiTour: "დაჯავშნე კახეთის ტური",
        kutaisiWelcome: "კეთილი იყოს თქვენი მობრძანება ქუთაისში!",
        kutaisiDesc1: "ქუთაისი, მსოფლიოს ერთ-ერთი უძველესი ქალაქი, მდიდარია ისტორიითა და კულტურით. მოინახულეთ ბაგრატის ტაძარი და გელათის მონასტერი, რომლებიც იუნესკოს მსოფლიო მემკვიდრეობის ძეგლებია.",
        kutaisiDesc2: "ჩვენი ტური 'ქუთაისი - ბიკენტიას ქაბაბი' აერთიანებს ქალაქის დათვალიერებასა და ლეგენდარული ადგილობრივი სამზარეულოს დაგემოვნებას.",
        bookKutaisiTour: "დაჯავშნე ქუთაისის ტური",
        tushetiWelcome: "კეთილი იყოს თქვენი მობრძანება თუშეთში!",
        tushetiDesc1: "თუშეთი ისტორიული რეგიონია ჩრდილო-აღმოსავლეთ საქართველოში, რომელიც ცნობილია თავისი განსაცვიფრებელი მთის პეიზაჟებითა და უძველესი თავდაცვითი კოშკებით. ეს სამოთხეა მოლაშქრეებისა და ბუნების მოყვარულთათვის.",
        tushetiDesc2: "ჩვენი 'ტური თუშეთში' წაგიყვანთ თვალწარმტაცი მთის უღელტეხილებით ამ შორეული და ულამაზესი რეგიონის გამოსაკვლევად.",
        bookTushetiTour: "დაჯავშნე თუშეთის ტური",
        zugdidiWelcome: "კეთილი იყოს თქვენი მობრძანება ზუგდიდში!",
        zugdidiDesc1: "ზუგდიდი სამეგრელოს რეგიონის გულია, რომელიც ცნობილია დადიანების სასახლეებით. ეს ისტორიული კომპლექსი სამეგრელოს მმართველთა რეზიდენცია იყო და ახლა საინტერესო მუზეუმს მასპინძლობს.",
        zugdidiDesc2: "ჩვენი ტური 'ზუგდიდის ისტორია' გაგიძღვებათ დადიანების დინასტიისა და მიმდებარე რეგიონის მდიდარ მემკვიდრეობაში.",
        bookZugdidiTour: "დაჯავშნე ზუგდიდის ტური",
        batumiWelcome: "კეთილი იყოს თქვენი მობრძანება ბათუმში!",
        batumiDesc1: "ბათუმი შავი ზღვის სანაპიროზე მდებარე ცოცხალი საპორტო ქალაქია. ის ცნობილია თავისი თანამედროვე არქიტექტურით, ულამაზესი ბულვარით, ბოტანიკური ბაღითა და აქტიური ღამის ცხოვრებით.",
        batumiDesc2: "გამოიკვლიეთ 'ბათუმის ზღვის სანაპირო' ჩვენი ტურით და დატკბით სუბტროპიკული ბუნებისა და ხმაურიანი ქალაქის ცხოვრების უნიკალური ნაზავით.",
        bookBatumiTour: "დაჯავშნე ბათუმის ტური",
        kazbegiWelcome: "კეთილი იყოს თქვენი მობრძანება ყაზბეგში!",
        kazbegiDesc1: "ყაზბეგი (სტეფანწმინდა) პატარა ქალაქია კავკასიის მთებში, რომელიც ცნობილია გერგეტის სამების ეკლესიით, რომელიც გორაკის წვერზე დგას მყინვარწვერის ფონზე.",
        kazbegiDesc2: "განიცადეთ 'ყაზბეგის სილამაზე' ჩვენი ტურით, რომელიც საქართველოს ულამაზესი სამხედრო გზის გასწვრივ მიგიყვანთ.",
        bookKazbegiTour: "დაჯავშნე ყაზბეგის ტური",
    },
    de: {
        navHome: "Startseite",
        navRegister: "Registrieren",
        navContact: "Kontakt",
        navAbout: "Über uns",
        heroTitle: "Entdecken Sie Georgien – Berge, Wein & Kultur",
        heroText: "Entdecken Sie kuratierte Touren durch das ganze Land: Stadtrundgänge in Tiflis, Bergwanderungen in Swanetien, Weinproben in Kachetien und besuchen Sie Kutaissi, Simon und viele andere Orte.",
        heroBtn: "Touren anzeigen",
        toursHeading: "Beliebte Touren",
        tourBtn: "Jetzt buchen",
        tour1Title: "Sehenswürdigkeiten in Tiflis",
        tour1Text: "Ein Tag voller städtischer Highlights, lokalem Essen und malerischen Aussichtspunkten.",
        tour2Title: "Wandern in Swanetien",
        tour2Text: "Mehrtägige Wanderungen in den hohen Bergen des Kaukasus.",
        tour3Title: "Weintour nach Kachetien",
        tour3Text: "Weinberge, Weinkeller und traditionelle georgische Supra.",
        tour4Title: "Kutaissi - Bikentias Kebab",
        tour4Text: "Erkunden Sie die Highlights der Stadt Kutaissi und probieren Sie den berühmten Bikentias Kebab.",
        tour5Title: "Tour nach Tuschetien",
        tour5Text: "Erkunden Sie die alten Türme und die einzigartige Geschichte der abgelegenen Region Tuschetien.",
        tour6Title: "Geschichte von Sugdidi",
        tour6Text: "Tauchen Sie ein in die reiche Geschichte von Sugdidi und den Dadiani-Palästen.",
        tour7Title: "Meeresküste von Batumi",
        tour7Text: "Erleben Sie die wunderschöne Meeresküste von Batumi und ihr pulsierendes Stadtleben.",
        tour8Title: "Schönheit von Kasbegi",
        tour8Text: "Erleben Sie die atemberaubende Schönheit von Kasbegi und die ikonische Gergeti-Dreifaltigkeitskirche.",
        destHeading: "Reiseziele",
        destTbilisi: "Tiflis",
        destSvaneti: "Swanetien",
        destKakheti: "Kachetien",
        destKutaisi: "Kutaissi",
        destTusheti: "Tuschetien",
        destZugdidi: "Sugdidi",
        destBatumi: "Batumi",
        destKazbegi: "Kasbegi",
        footerText: "Imereti Tourismus",
        // Register Page
        registerTitle: "Buchen Sie Ihre Tour",
        registerText: "Füllen Sie das untenstehende Formular aus, um Ihren Platz auf einer unserer fantastischen Touren zu buchen.",
        regName: "Name",
        regSurname: "Nachname",
        regPhone: "Telefonnummer",
        regEmail: "Email",
        regTour: "Reiseziel der Tour",
        regPeople: "Wie viele Personen?",
        regNotes: "Anmerkungen / Wünsche",
        regPriceLabel: "Zu zahlender Betrag:",
        registerSubmit: "Buchung absenden",
        orderSuccess: "Vielen Dank, Ihre Bestellung ist eingegangen.",
        // Contact Page
        contactTitle: "Kontaktieren Sie uns",
        contactText: "Haben Sie Fragen? Wir würden uns freuen, von Ihnen zu hören. Senden Sie uns eine Nachricht und wir werden so schnell wie möglich antworten.",
        contactSubmit: "Nachricht senden",
        contactName: "Name",
        contactSurname: "Nachname",
        messageSuccess: "Vielen Dank, Ihre Nachricht wurde empfangen.",
        // About Us Page
        aboutUsHeading: "Über Imereti Tourismus",
        aboutUsText1: "Imereti Tourismus wurde von einer Gruppe leidenschaftlicher Reisender gegründet, die sich in die reiche Kultur, die atemberaubenden Landschaften und die herzliche Gastfreundschaft Georgiens verliebt haben. Unsere Mission ist es, diese Liebe mit der Welt zu teilen, indem wir authentische und unvergessliche Reiseerlebnisse anbieten.",
        aboutUsText2: "Wir glauben an einen verantwortungsvollen Tourismus, der den lokalen Gemeinschaften zugutekommt. Wir arbeiten mit lokalen Führern, familiengeführten Pensionen zusammen, um sicherzustellen, dass Ihre Reise einen positiven Einfluss hat. Von den lebhaften Straßen von Tiflis bis zu den abgelegenen Bergdörfern von Swanetien sind wir hier, um Ihnen zu helfen, die wahre Seele Georgiens zu entdecken.",
        aboutCEOs: "Geschäftsführer des Unternehmens: z.shengelia",
        videoAdTitle: "Erleben Sie Georgien wie nie zuvor",
        // Destination Pages
        tbilisiWelcome: "Willkommen in Tiflis!",
        tbilisiDesc1: "Tiflis, die Hauptstadt Georgiens, ist eine lebendige und historische Stadt. Bekannt für ihre vielfältige Architektur und die labyrinthartigen Kopfsteinpflasterstraßen in der Altstadt. Erkunden Sie die Nariqala-Festung, die Sameba-Kathedrale und genießen Sie die berühmten Schwefelbäder.",
        tbilisiDesc2: "Unsere Tour 'Sehenswürdigkeiten in Tiflis' bietet einen ganzen Tag voller städtischer Highlights, lokalem Essen und malerischen Aussichtspunkten. Verpassen Sie das nicht!",
        bookTbilisiTour: "Tiflis-Tour buchen",
        svanetiWelcome: "Willkommen in Swanetien!",
        svanetiDesc1: "Swanetien ist ein Land mittelalterlicher Türme, Gletscher und der höchsten Gipfel des Kaukasus. Diese abgelegene Region bietet einige der spektakulärsten Wanderungen und Landschaften in Georgien.",
        svanetiDesc2: "Unsere Tour 'Wandern in Swanetien' ist eine mehrtägige Wanderung, die Sie in die raue Schönheit der Berge eintauchen lässt.",
        bookSvanetiTour: "Swanetien-Tour buchen",
        kakhetiWelcome: "Willkommen in Kachetien!",
        kakhetiDesc1: "Kachetien ist Georgiens führende Weinbauregion. Entdecken Sie die alte Tradition der Qvevri-Weinherstellung, besuchen Sie wunderschöne Klöster und erkunden Sie die bezaubernde Stadt Sighnaghi.",
        kakhetiDesc2: "Nehmen Sie an unserer 'Weintour nach Kachetien' teil und erleben Sie Weinberge, Weinkeller und traditionelle georgische Feste.",
        bookKakhetiTour: "Kachetien-Tour buchen",
        kutaisiWelcome: "Willkommen in Kutaissi!",
        kutaisiDesc1: "Kutaissi, eine der ältesten Städte der Welt, ist reich an Geschichte und Kultur. Besuchen Sie die prächtige Bagrati-Kathedrale und das Gelati-Kloster, beides UNESCO-Weltkulturerbestätten.",
        kutaisiDesc2: "Unsere Tour 'Kutaissi - Bikentias Kebab' kombiniert Stadterkundung mit einem Vorgeschmack auf die legendäre lokale Küche.",
        bookKutaisiTour: "Kutaissi-Tour buchen",
        tushetiWelcome: "Willkommen in Tuschetien!",
        tushetiDesc1: "Tuschetien ist eine historische Region im Nordosten Georgiens, bekannt für ihre atemberaubenden Berglandschaften und alten Wehrtürme. Es ist ein Paradies für Wanderer und Naturliebhaber.",
        tushetiDesc2: "Unsere 'Tour nach Tuschetien' führt Sie über atemberaubende Bergpässe, um diese abgelegene und wunderschöne Region zu erkunden.",
        bookTushetiTour: "Tuschetien-Tour buchen",
        zugdidiWelcome: "Willkommen in Sugdidi!",
        zugdidiDesc1: "Sugdidi ist das Herz der Region Samegrelo, bekannt für die prächtigen Dadiani-Paläste. Dieser historische Komplex war die Heimat der Herrscher von Samegrelo und beherbergt heute ein faszinierendes Museum.",
        zugdidiDesc2: "Unsere Tour 'Geschichte von Sugdidi' führt Sie durch das reiche Erbe der Dadiani-Dynastie und der umliegenden Region.",
        bookZugdidiTour: "Sugdidi-Tour buchen",
        batumiWelcome: "Willkommen in Batumi!",
        batumiDesc1: "Batumi ist eine lebhafte Hafenstadt an der Schwarzmeerküste. Sie ist bekannt für ihre moderne Architektur, den schönen Boulevard, den Botanischen Garten und das pulsierende Nachtleben.",
        batumiDesc2: "Erkunden Sie die 'Meeresküste von Batumi' mit unserer Tour und genießen Sie die einzigartige Mischung aus subtropischer Natur und geschäftigem Stadtleben.",
        bookBatumiTour: "Batumi-Tour buchen",
        kazbegiWelcome: "Willkommen in Kasbegi!",
        kazbegiDesc1: "Kasbegi (Stepanzminda) ist eine kleine Stadt im Kaukasus, berühmt für die ikonische Gergeti-Dreifaltigkeitskirche, die auf einem Hügel mit dem Berg Kasbek im Hintergrund thront.",
        kazbegiDesc2: "Erleben Sie die 'Schönheit von Kasbegi' auf unserer Tour, die Sie entlang der atemberaubenden Georgischen Heerstraße führt.",
        bookKazbegiTour: "Kasbegi-Tour buchen",
    }
};

function setLanguage(lang) {
    localStorage.setItem('language', lang);
    // Reload the page to apply changes everywhere
    window.location.reload(); 
}

function updateTexts(lang) {
    const langTranslations = translations[lang];
    if (!langTranslations) return;

    document.querySelectorAll('[data-key]').forEach(element => {
        const key = element.getAttribute('data-key');
        if (langTranslations[key]) {
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = langTranslations[key];
            } else if (element.tagName === 'LABEL') {
                // This handles labels for inputs
                const forAttr = element.getAttribute('for');
                if (forAttr) element.textContent = langTranslations[key];
            } else if (element.tagName === 'A' && element.querySelector('i.fas')) {
                // This handles nav links with Font Awesome icons
                // It preserves the <i> tag and only changes the text content after it.
                const icon = element.querySelector('i.fas');
                // Clear existing content except the icon
                while (icon.nextSibling) {
                    element.removeChild(icon.nextSibling);
                }
                // Add new translated text node with a space
                element.appendChild(document.createTextNode(' ' + langTranslations[key]));
            } else {
                element.textContent = langTranslations[key];
            }
        }
    });
}

document.addEventListener('DOMContentLoaded', () => {
    // --- Theme (Dark/Light Mode) ---
    const themeToggle = document.getElementById('themeToggle');
    const currentTheme = localStorage.getItem('theme');

    // Apply saved theme or system preference
    if (currentTheme === 'dark' || (!currentTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.body.classList.add('dark-mode');
    }

    if (themeToggle) {
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            let theme = 'light';
            if (document.body.classList.contains('dark-mode')) {
                theme = 'dark';
            }
            localStorage.setItem('theme', theme);
        });
    }


    // --- Language ---
    const savedLang = localStorage.getItem('language') || 'en';

    updateTexts(savedLang);

    const currentYear = new Date().getFullYear();
    const footerYearEl = document.getElementById('footerYear');
    if (footerYearEl) {
        footerYearEl.textContent = currentYear;
    }

    // Set active language button
    const langButtons = document.querySelectorAll('.lang-switcher button');
    langButtons.forEach(button => {
        if (button.getAttribute('onclick') === `setLanguage('${savedLang}')`) {
            button.classList.add('active');
        } else {
            button.classList.remove('active');
        }
    });

    // Set active navigation link
    const navLinks = document.querySelectorAll('nav a');
    const currentPath = window.location.pathname.endsWith('/') 
        ? window.location.pathname + 'index.html' 
        : window.location.pathname;

    navLinks.forEach(link => {
        const linkPath = new URL(link.href).pathname;
        if (linkPath === currentPath) {
            link.classList.add('active');
        } else {
            link.classList.remove('active');
        }
    });

    // --- Register Page Specific Logic ---
    if (document.getElementById('registerForm')) {
        const tourPrices = {
            "tbilisi": 50,
            "svaneti": 150,
            "kakheti": 80,
            "kutaisi": 40,
            "tusheti": 180,
            "zugdidi": 60,
            "batumi": 70,
            "kazbegi": 140
        };

        const tourSelect = document.getElementById('tourDestination');
        const peopleInput = document.getElementById('peopleCount');
        const priceValueEl = document.getElementById('priceValue');

        function calculatePrice() {
            const selectedTour = tourSelect.value;
            const peopleCount = parseInt(peopleInput.value) || 1;
            const tourPrice = tourPrices[selectedTour] || 0;

            const totalCost = tourPrice * peopleCount;

            if (priceValueEl) {
                priceValueEl.textContent = `$${totalCost}`;
            }
        }

        if (tourSelect && peopleInput) {
            tourSelect.addEventListener('change', calculatePrice);
            peopleInput.addEventListener('input', calculatePrice);
            // Initial calculation
            
            // Check for tour in URL query parameters
            const urlParams = new URLSearchParams(window.location.search);
            const tourFromURL = urlParams.get('tour');
            if (tourFromURL && tourPrices[tourFromURL]) {
                tourSelect.value = tourFromURL;
            }

            calculatePrice();
        }
    }

    // --- Header Search Logic (ყველა გვერსი) ---
    const searchInput = document.getElementById('headerSearch');
    const searchButton = document.querySelector('.header-search-btn');

    // Map destination names in all languages to their page URLs
    const destinationMap = {
        // English
        'tbilisi': 'tbilisi.html',
        'svaneti': 'svaneti.html',
        'kakheti': 'kakheti.html',
        'kutaisi': 'kutaisi.html',
        'tusheti': 'tusheti.html',
        'zugdidi': 'zugdidi.html',
        'batumi': 'batumi.html',
        'kazbegi': 'kazbegi.html',
        // Georgian
        'თბილისი': 'tbilisi.html',
        'სვანეთი': 'svaneti.html',
        'კახეთი': 'kakheti.html',
        'ქუთაისი': 'kutaisi.html',
        'თუშეთი': 'tusheti.html',
        'ზუგდიდი': 'zugdidi.html',
        'ბათუმი': 'batumi.html',
        'ყაზბეგი': 'kazbegi.html',
        // German
        'tiflis': 'tbilisi.html',
        'swanetien': 'svaneti.html',
        'kachetien': 'kakheti.html',
        'kutaissi': 'kutaisi.html',
        'tuschetien': 'tusheti.html',
        'sugdidi': 'zugdidi.html',
        // 'batumi' is already mapped in english
        'kasbegi': 'kazbegi.html'
    };

    function performSearch() {
        const searchTerm = searchInput.value.trim().toLowerCase();
        const destinationPage = destinationMap[searchTerm];
        if (destinationPage) {
            window.location.href = destinationPage;
        }
    }

    if (searchInput && searchButton) {
        searchButton.addEventListener('click', performSearch);
        searchInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                performSearch();
            }
        });
    }
});

document.getElementById('toTopBtn').addEventListener('click', () => window.scrollTo({top: 0, behavior: 'smooth'}));
window.onscroll = () => {
    const toTopBtn = document.getElementById('toTopBtn');
    if (toTopBtn) {
        if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            toTopBtn.style.display = "block";
        } else {
            toTopBtn.style.display = "none";
        }
    }
};

document.getElementById('registerForm')?.addEventListener('submit', function(event) {
    event.preventDefault(); // Prevents the form from submitting the traditional way
    document.getElementById('successMessage').style.display = 'block';
    this.style.display = 'none';
});

document.getElementById('contactForm')?.addEventListener('submit', function(event) {
    event.preventDefault(); // Prevents the form from submitting
    document.getElementById('successMessage').style.display = 'block';
    this.style.display = 'none';
});